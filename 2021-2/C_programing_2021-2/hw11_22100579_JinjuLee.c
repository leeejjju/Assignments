/*¡Æ???11) MAGIC SQUARE ??¢§? ??¢§??¡¿¢§?

???¢´?? ?????? magic square ??¢§?

??¢§? : magic square size (1?¢¬¢¥? ?? ???? ¡Æ?)
??¢§? : ???¢´?? ?????? magic square
*/

#include <stdio.h>

int main(void){
	int size = 0; //??¢§????? ??????   
	int i = 0, j = 0; //???????? ?¡×?? ????  
	int a , b; //¢¬????? ©©? ?¡×??¢¬? ©©??¢¬©©? ????  
	
	
	while(!(size%2 == 1 && size > 1)){
		printf("magic square?? ????¢¬? ??¢§?????????(1?¢¬¢¥? ?? ???? ¡Æ?) : ");
		scanf("%d", &size);
	}
	
	int array[size+1][size+1]; //magic square¢¬? ??¢§??? ???¡© ???©¢(?????¡À??)  	
		
	for(i = 0; i < size+1; i++){ // ???¡© ?????¡©(???¡© ¢¥?¢§??¡©)  
		for(j = 0; j < size+1; j++){
			if(i == size || j == size){ //??????¢§??? ??????¢¥? ?¢©??¡Æ? ©©???  
				array[i][j] = -1;
			}else{
				array[i][j] = 0;
			}
		}
	}
	
	
	a = size-1; //¢¬????? ?????? ¢©??????? ?©©?¢´(¢¬? ???? ¡Æ?????), ¢©???¡Æ?(1) ©©???  
	b = size/2;
	array[a][b] = 1; 

	
	for(i = 0; i < size*size-1; i++){ //¢¬??????? ¡Æ? ©©??? 
	 
		a++, b++; //???? ??¢§??¡©?¢¬¢§? ????
		
		if(array[a][b] == 0){ //??????¢¥? ?¡©?? ¡Æ???  
			array[a][b] = i+2; // ??¢¥? ?¡×???? ¡Æ? ©©???  
		}else if(array[a][b] > 0){//¢¥?¢¬? ¡Æ??? ?¢´???????? ¡Æ???  
			a--; //?¡×¢§? ???¡© ???? ?? ¡Æ? ©©??? 
			array[a][b] = i+2; 
		}else{//???? ???? ¡Æ???(??¢¥? ¡Æ?¡Æ¨©?? ?¢©??¡Æ? ???????? ??) 
			if(a == size && b == size){ //???? ????¢¥??? ¡Æ???  
				a = 0, b = 0; //???¡©?¢¬¢§? ???? ?? ¡Æ? ©©???  
				array[a][b] = i+2;
			}else if(a == size){ //???? ????©©??? ¡Æ???  
				a = 0; //????¢¥??¢¬¢§? ???? ?? ¡Æ? ©©???  
				array[a][b] = i+2;
			}else{ //?¡©?? ????©©??? ¡Æ???  
				b = 0; //???? ©©??¢¬¢§? ???? ?? ¡Æ? ©©???  
				array[a][b] = i+2;
			}
		}	
	}
	
	printf("\n\n[%d * %d magic square]\n\n", size, size);
	
	for(i = 0; i < size; i++){ //¢¬????? ??¢§?  
		for(j = 0; j < size; j++){
			printf(" %d ", array[i][j]);
		}
		printf("\n\n");
	}

	
	//what is this....  
	
	
	return 0;
}
 
